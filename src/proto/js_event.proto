syntax = "proto3";

package wow.web.proto;

message Wrapper {
  JsEvent event = 1;
}

message JsEvent {
  oneof event {
    InitializeRequest initialize_request = 1;
    BrowseFolderRequest browse_folder_request = 2;
    BrowseFolderResponse browse_folder_response = 3;
    EmptyResponse empty_response = 4;
    LoadDataEvent load_data_event = 5;
    LoadUpdateEvent load_update_event = 6;
    ListMapsRequest list_maps_request = 7;
    ListMapsResponse list_maps_response = 8;
    ListMapPoisRequest list_map_pois_request = 9;
    ListMapPoisResponse list_map_pois_response = 10;
    EnterWorldRequest enter_world_request = 11;
    LoadingScreenShowEvent loading_screen_show_event = 12;
    LoadingScreenProgressEvent loading_screen_progress_event = 13;
    LoadingScreenCompleteEvent loading_screen_complete_event = 14;
    AreaUpdateEvent area_update_event = 15;
    WorldPositionUpdateEvent world_position_update_event = 16;
    FpsUpdateEvent fps_update_event = 17;
    SystemUpdateEvent system_update_event = 18;
  }
}

message InitializeRequest {

}

message BrowseFolderRequest {
  string title = 1;
  string default_path = 2;
  repeated string filters = 3;
  bool allow_create = 4;
}

message BrowseFolderResponse {
  bool canceled = 1;
  string path = 2;
}

message EmptyResponse {

}

message LoadDataEvent {
  string folder = 1;
}

message LoadUpdateEvent {
  int32 percentage = 1;
  bool completed = 5;
  string message = 10;
}

message ListMapsRequest {

}

message ListMapsResponseMap {
  int32 map_id = 1;
  string name = 2;
  string loading_screen = 3;
}

message ListMapsResponse {
  repeated ListMapsResponseMap maps = 1;
}

message ListMapPoisRequest {
  int32 map_id = 1;
}

message MapPoi {
  int32 id = 1;
  string name = 2;
  float x = 3;
  float y = 4;
}

message ListMapPoisResponse {
  int32 map_id = 1;
  repeated MapPoi pois = 2;
}

message EnterWorldRequest {
  int32 map_id = 1;
  float x = 2;
  float y = 3;
}

message LoadingScreenShowEvent {
  string image_path = 1;
}

message LoadingScreenProgressEvent {
  float percentage = 1;
}

message LoadingScreenCompleteEvent {

}

message AreaUpdateEvent {
  string area_name = 1;
  int32 area_id = 2;
}

message WorldPositionUpdateEvent {
  string map_name = 1;
  int32 map_id = 2;
  float x = 3;
  float y = 4;
  float z = 5;
}

message FpsUpdateEvent {
  int32 fps = 1;
}

message SystemUpdateEvent {
  int64 memory_usage = 1;
  int32 cpu_usage = 2;
  int32 gpu_usage = 3;
  int64 total_memory = 4;
}